"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.useSelector = void 0;
var store_1 = require("svelte/store");
var defaultCompare = function (a, b) { return a === b; };
var useSelector = function (actor, selector, compare) {
    if (compare === void 0) { compare = defaultCompare; }
    var sub;
    var selected = (0, store_1.readable)(selector(actor.getSnapshot()), function (set) {
        sub = actor.subscribe(function (state) {
            var nextSelected = selector(state);
            if (!compare((0, store_1.get)(selected), nextSelected)) {
                set(nextSelected);
            }
        });
        return function () {
            sub.unsubscribe();
        };
    });
    return selected;
};
exports.useSelector = useSelector;
